<mat-card class="kyc-card">
  <div class="header-content">
    <div class="header-icon">
      <mat-icon>mail</mat-icon>
    </div>
    <div class="header-text">
      <h2>Contact Information</h2>
      <p>Please provide your email address for verification</p>
    </div>
    <!-- Circular Progress Indicator -->
    <div class="step-indicator">
      <div class="progress-circle">
        <svg width="40" height="40">
          <circle class="progress-ring-bg" cx="20" cy="20" r="18"/>
          <circle class="progress-ring-circle" 
                  cx="20" 
                  cy="20" 
                  r="18"
                  stroke-dasharray="113.097"
                  stroke-dashoffset="0"/>
        </svg>
        <span class="percentage">100%</span>
      </div>
      <div class="step-text">
        <span class="current-step">Step 3 of 3</span>
        <span class="step-label">Email Verification</span>
      </div>
    </div>
  </div>

  <!-- Step Progress Indicator -->
  <div class="progress-steps" [attr.data-step]="currentStep">
    <div class="step clickable" 
         [ngClass]="{'completed': currentStep > 1, 'active': currentStep === 1}"
         (click)="onStepClick(1)">
      <div class="step-circle">1</div>
      <div class="step-info">
        <span class="step-title">Personal Info</span>
        <small class="step-subtitle">Basic details</small>
      </div>
    </div>

    <div class="step clickable" 
         [ngClass]="{'completed': currentStep > 2, 'active': currentStep === 2}"
         (click)="onStepClick(2)">
      <div class="step-circle">2</div>
      <div class="step-info">
        <span class="step-title">ID Verification</span>
        <small class="step-subtitle">Document upload</small>
      </div>
    </div>

    <div class="step clickable" 
         [ngClass]="{'completed': currentStep > 3, 'active': currentStep === 3}"
         (click)="onStepClick(3)">
      <div class="step-circle">3</div>
      <div class="step-info">
        <span class="step-title">Contact Info</span>
        <small class="step-subtitle">Email verification</small>
      </div>
    </div>
  </div>

  <form [formGroup]="emailForm">
    <div class="form-section">
      <div class="form-header">
        <h3 class="form-title">Email Address</h3>
        <p class="form-description">Please enter your email address. </p>
      </div>
      <div class="email-field-container">
        <mat-form-field appearance="outline">
          <mat-label>Email address</mat-label>
          <input matInput 
                 formControlName="email" 
                 type="email" 
                 placeholder="e.g., john.doe@example.com">
          <mat-icon matSuffix>mail</mat-icon>
          <mat-hint>We'll never share your email with anyone else.</mat-hint>
          <mat-error *ngIf="emailForm.get('email')?.hasError('required')">
            Email address is required
          </mat-error>
          <mat-error *ngIf="emailForm.get('email')?.hasError('email')">
            Please enter a valid email address
          </mat-error>
        </mat-form-field>
      </div>
    </div>

    <mat-card-actions>
      <button mat-button (click)="onBack()">
        <mat-icon>arrow_back</mat-icon>
        Back
      </button>
      <button mat-raised-button color="primary" 
              [disabled]="!emailForm.valid"
              (click)="onFinish()">
        Submit
        <mat-icon>send</mat-icon>
      </button>
    </mat-card-actions>
  </form>
</mat-card>
